<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ö—ñ–Ω–æ - –ê–¥–º—ñ–Ω–∫–∞</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

<div class="container">
    <div class="block block-1">
        <h1>Cinema Admin</h1>
        <h2>–î–æ–¥–∞–≤–∞–Ω–Ω—è —Å–µ–∞–Ω—Å—ñ–≤</h2>
    </div>

    <div class="block block-2">
        <h3>–Ü–Ω—Ñ–æ</h3>
        <p>
            –í–≤–µ–¥—ñ—Ç—å –¥–∞–Ω—ñ –ø—Ä–æ —Ñ—ñ–ª—å–º–∏ —Ç–∞ –Ω–∞—Ç–∏—Å–Ω—ñ—Ç—å <b>¬´–ó–±–µ—Ä–µ–≥—Ç–∏¬ª</b>.<br>
        </p>
    </div>

    <div class="block block-3">
        <h3>–ú–µ–Ω—é</h3>
        <ul>
            <li><a href="index.html">–î–æ–¥–∞—Ç–∏ —Ñ—ñ–ª—å–º</a></li>
            <li><a href="index2.html">–ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ –∞—Ñ—ñ—à—É</a></li>
        </ul>
    </div>

    <div class="block block-4">
        <h3>–†–µ–¥–∞–∫—Ç–æ—Ä –∞—Ñ—ñ—à—ñ</h3>

        <div id="editor-container">
            <div class="editor-item">
                <input type="text" class="input-title" placeholder="–ù–∞–∑–≤–∞ —Ñ—ñ–ª—å–º—É">
                <textarea class="input-content" placeholder="–û–ø–∏—Å" rows="3"></textarea>
            </div>
        </div>

        <div class="editor-controls">
            <button type="button" class="btn" onclick="addBlock()">+ –î–æ–¥–∞—Ç–∏ —â–µ</button>
        </div>

        <button type="button" class="btn" style="width: 100%;" onclick="saveData()">–ó–±–µ—Ä–µ–≥—Ç–∏</button>
    </div>

    <div class="block block-5">
        <h3>Extra</h3>
        <p>–¢—É—Ç –º–æ–∂–Ω–∞ –≤–∏–≤–µ—Å—Ç–∏ –¥–æ–¥–∞—Ç–∫–æ–≤—É —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ —Å–∏—Å—Ç–µ–º—É, –ø—ñ–¥–∫–∞–∑–∫–∏ —Ç–æ—â–æ.</p>
    </div>

    <div class="block block-6"><h2>Promo</h2></div>
    <div class="block block-7"><h3>2025</h3></div>
</div>

<script>
function addBlock() {
    const container = document.getElementById('editor-container');
    const div = document.createElement('div');
    div.className = 'editor-item';
    div.innerHTML = `
        <input type="text" class="input-title" placeholder="–ù–∞–∑–≤–∞ —Ñ—ñ–ª—å–º—É">
        <textarea class="input-content" placeholder="–û–ø–∏—Å" rows="3"></textarea>
        <button type="button" class="btn btn-danger" onclick="this.parentElement.remove()">–í–∏–¥–∞–ª–∏—Ç–∏</button>
    `;
    container.appendChild(div);
}

function saveData() {
    const titles = [...document.querySelectorAll('.input-title')].map(i => i.value.trim());
    const contents = [...document.querySelectorAll('.input-content')].map(i => i.value.trim());

    // –§–æ—Ä–º—É—î–º–æ –º–∞—Å–∏–≤ –æ–±‚Äô—î–∫—Ç—ñ–≤ —Ç—ñ–ª—å–∫–∏ –∑ –Ω–µ–ø–æ—Ä–æ–∂–Ω—ñ–º–∏ –∑–∞–≥–æ–ª–æ–≤–∫–∞–º–∏
    const objects = titles.map((title, i) => ({
        title: title,
        content: contents[i] ?? ""
    })).filter(x => x.title.length > 0 || x.content.length > 0);

    if (objects.length === 0) {
        alert("–ù–µ–º–∞—î –¥–∞–Ω–∏—Ö –¥–ª—è –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è.");
        return;
    }

    fetch("server.php", {
        method: "POST",
        headers: {"Content-Type": "application/json"},
        body: JSON.stringify(objects)
    })
    .then(r => r.json())
    .then(r => {
        if (r.status === "ok") {
            alert("–£—Å–ø—ñ—à–Ω–æ –∑–±–µ—Ä–µ–∂–µ–Ω–æ!");

            // üî• –û—á–∏—â–∞—î–º–æ —Ç–∞ –∑–∞–ª–∏—à–∞—î–º–æ –æ–¥–∏–Ω –ø–æ—Ä–æ–∂–Ω—ñ–π –±–ª–æ–∫
            document.getElementById('editor-container').innerHTML = `
                <div class="editor-item">
                    <input type="text" class="input-title" placeholder="–ù–∞–∑–≤–∞ —Ñ—ñ–ª—å–º—É">
                    <textarea class="input-content" placeholder="–û–ø–∏—Å" rows="3"></textarea>
                </div>
            `;
        } else {
            alert("–ü–æ–º–∏–ª–∫–∞ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è: " + (r.msg || ""));
        }
    })
    .catch(err => {
        console.error(err);
        alert("–°—Ç–∞–ª–∞—Å—è –ø–æ–º–∏–ª–∫–∞ –ø—Ä–∏ –≤—ñ–¥–ø—Ä–∞–≤—Ü—ñ –¥–∞–Ω–∏—Ö.");
    });
}
</script>

</body>
</html>
